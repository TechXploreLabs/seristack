stacks:
- name: testing1
  workDir: ./
  continueOnError: true
  count: 0
  isSerial: TRUE
  vars:
    samplekey: samplevalue
  cmds:
  - |
    export samplekey={{.Vars.samplekey}}
    echo $samplekey > tmpfsdr.txt
  - cat tmpfsdr.txt
  - echo "hi"
  - echo "count={{.Count.index}}"
  - echo "testing1"
- name: testing2
  workDir: ./
  continueOnError: false
  count: 0
  dependsOn: ["testing1"]
  isSerial: TRUE
  vars:
    samplekey: samplevalue
  cmds:
  - |
    echo "{{.Result.testing1}}" | grep "count"
    echo "testing2"
- name: testing3
  workDir: ./
  continueOnError: FALSE
  count: 5
  dependsOn: ["testing2"]
  isSerial: TRUE
  vars:
    samplekey: samplevalue
  cmds:
  - |
    ps -ef | grep "count"
    echo "testing3"
- name: testing4
  workDir: ./
  continueOnError: FALSE
  count: 5
  dependsOn: ["testing2"]
  isSerial: TRUE
  vars:
    samplekey: samplevalue
  cmds:
  - |
    echo "{{.Vars.samplekey}}"
    echo "testing4"

server:
  port: 8080
  endpoint:
  - path: /show
    method: GET
    stackName: testing3
  - path: /echo
    method: GET
    stackName: testing4
  - path: /trigger
    method: POST        
    stackName: testing1
